import React from 'react';
import s from './VideoRender.module.scss';
import { Videos } from '../../redux/slices/videosSlice'

type VideoRenderProps = {
  video: Videos,
}
const VideoRender: React.FC<VideoRenderProps> = ({ video }) => {
  const smartTitle = (title: string) => {
    return title.slice(0, 70) + '...';
  };

  const [download, setDownload] = React.useState(false);

  const downloadVideo = () => {
    setDownload(true);
  };

  return (
    <div className={s.videoCardNet}>
      <div className={s.thumbWrap}>
        {!download ? (
          <div className={s.pucture}>
            <picture>
              <source
                srcSet={`https://i.ytimg.com/vi_webp/${video.id.videoId}/maxresdefault.webp`}
                type="image/webp"
              />
              <img
                className={s.videoImg}
                src={`https://i.ytimg.com/vi/${video.id.videoId}/maxresdefault.jpg`}
                alt={video.snippet.title}
              />
            </picture>
            <button className={s.videoBtn} onClick={() => downloadVideo()}>
              <svg
                className={s.svgBtn}
                xmlns="http://www.w3.org/2000/svg"
                x="0px"
                y="0px"
                width="100"
                height="100"
                viewBox="0 0 100 100">
                <path d="M 54.839844 18.775391 C 53.369286 18.758415 51.896732 18.766336 50.421875 18.798828 C 38.623023 19.058764 26.688655 20.907965 14.628906 24.431641 A 2.0002 2.0002 0 0 0 13.203125 26.121094 C 10.826476 46.637185 11.300117 60.818869 13.431641 71.498047 A 2.0002 2.0002 0 0 0 15.039062 73.074219 C 39.057462 77.378024 61.615842 77.537602 82.857422 74.037109 A 2.0002 2.0002 0 0 0 84.470703 72.554688 C 88.001812 58.626877 89.072715 42.771814 86.910156 24.40625 A 2.0002 2.0002 0 0 0 85.400391 22.697266 C 75.322176 20.221089 65.133748 18.894219 54.839844 18.775391 z M 54.375 22.769531 L 54.037109 24.089844 A 1.0001 1.0001 0 1 0 55.974609 24.583984 L 56.427734 22.818359 C 56.904858 22.830564 57.382718 22.83977 57.859375 22.857422 L 57.439453 24.003906 A 1.0001 1.0001 0 1 0 59.316406 24.693359 L 59.953125 22.955078 C 60.59492 22.989579 61.235985 23.027986 61.876953 23.072266 L 61.328125 24.232422 A 1.0003549 1.0003549 0 1 0 63.136719 25.087891 L 64.011719 23.240234 C 64.435041 23.276657 64.85828 23.314822 65.28125 23.355469 L 64.880859 24.560547 A 1.0001 1.0001 0 1 0 66.777344 25.193359 L 67.320312 23.558594 C 68.03538 23.638829 68.748807 23.733988 69.462891 23.826172 L 68.658203 25.314453 A 1.0001 1.0001 0 1 0 70.416016 26.265625 L 71.583984 24.111328 C 72.756975 24.282284 73.929189 24.463288 75.099609 24.666016 L 73.748047 27.337891 A 1.0005667 1.0005667 0 1 0 75.533203 28.242188 L 77.146484 25.050781 C 77.766805 25.168104 78.388191 25.274272 79.007812 25.400391 L 78.220703 26.351562 A 1.0001 1.0001 0 1 0 79.759766 27.626953 L 81.205078 25.882812 C 81.818828 26.018151 82.433791 26.141291 83.046875 26.285156 C 83.299368 28.600729 83.494535 30.868097 83.642578 33.097656 L 81.066406 35.986328 A 1.0001 1.0001 0 1 0 82.558594 37.316406 L 83.802734 35.919922 C 83.824091 36.367306 83.840256 36.809972 83.857422 37.253906 L 80.042969 40.222656 A 1.0001 1.0001 0 1 0 81.271484 41.800781 L 83.931641 39.728516 C 84.056145 45.522895 83.820512 51.020769 83.257812 56.25 L 76.494141 54.119141 A 1.0001 1.0001 0 0 0 76.199219 54.068359 A 1.0001 1.0001 0 0 0 75.892578 56.027344 L 83.025391 58.273438 C 82.941666 58.941513 82.856143 59.608293 82.761719 60.267578 L 78.470703 59.003906 A 1.0001 1.0001 0 0 0 78.175781 58.958984 A 1.0001 1.0001 0 0 0 77.90625 60.923828 L 82.453125 62.261719 C 82.01086 64.997741 81.481162 67.661339 80.859375 70.25 C 72.065249 71.631087 63.036236 72.37212 53.757812 72.4375 L 54.359375 71.447266 A 1.0001 1.0001 0 0 0 53.542969 69.916016 A 1.0001 1.0001 0 0 0 52.648438 70.408203 L 51.419922 72.431641 C 50.932422 72.429118 50.447864 72.433984 49.958984 72.427734 L 50.337891 71.554688 A 1.0001 1.0001 0 0 0 49.419922 70.144531 A 1.0001 1.0001 0 0 0 48.501953 70.757812 L 47.798828 72.376953 C 47.295422 72.364916 46.793931 72.359734 46.289062 72.34375 L 46.882812 70.839844 A 1.0001 1.0001 0 0 0 45.919922 69.458984 A 1.0001 1.0001 0 0 0 45.023438 70.103516 L 44.171875 72.257812 C 43.672143 72.236614 43.17304 72.218422 42.671875 72.193359 L 42.972656 71.392578 A 1.0001 1.0001 0 0 0 41.988281 70.027344 A 1.0001 1.0001 0 0 0 41.101562 70.6875 L 40.578125 72.074219 C 40.006365 72.039619 39.434954 72.002516 38.861328 71.962891 L 39.462891 70.472656 A 1.0001 1.0001 0 0 0 38.507812 69.085938 A 1.0001 1.0001 0 0 0 37.607422 69.724609 L 36.767578 71.806641 C 35.254307 71.686428 33.733333 71.547834 32.207031 71.392578 L 33.191406 69.300781 A 1.0001 1.0001 0 0 0 32.316406 67.863281 A 1.0001 1.0001 0 0 0 31.380859 68.449219 L 30.097656 71.173828 C 29.440154 71.100246 28.77907 71.017599 28.119141 70.9375 L 29.320312 69.234375 A 1.0001 1.0001 0 0 0 28.511719 67.644531 A 1.0001 1.0001 0 0 0 27.6875 68.080078 L 25.865234 70.658203 C 24.430279 70.468649 22.989433 70.265335 21.542969 70.044922 L 23.804688 67.060547 A 1.0001 1.0001 0 0 0 23.048828 65.445312 A 1.0001 1.0001 0 0 0 22.210938 65.851562 L 19.306641 69.683594 C 18.830101 69.606045 18.354744 69.532073 17.876953 69.451172 L 19.701172 66.089844 A 1.0001 1.0001 0 0 0 18.8125 64.599609 A 1.0001 1.0001 0 0 0 17.943359 65.134766 L 16.820312 67.205078 C 15.993094 61.826185 15.566181 55.494121 15.701172 47.867188 L 18.380859 49.220703 A 1.0001258 1.0001258 0 0 0 19.283203 47.435547 L 15.753906 45.654297 C 15.770573 45.114751 15.800149 44.544281 15.822266 43.992188 L 20.970703 45.898438 A 1.0001 1.0001 0 1 0 21.666016 44.023438 L 15.910156 41.892578 C 16.12976 37.610932 16.493795 32.995869 17.054688 27.933594 C 17.505229 27.806477 17.954222 27.696649 18.404297 27.574219 L 20.039062 30.826172 A 1.0005581 1.0005581 0 0 0 21.826172 29.925781 L 20.378906 27.048828 C 20.832729 26.932116 21.286882 26.813104 21.740234 26.701172 L 23.314453 29.662109 A 1.0004047 1.0004047 0 1 0 25.082031 28.724609 L 23.755859 26.228516 C 24.348999 26.091141 24.942814 25.941669 25.535156 25.8125 A 1.0001 1.0001 0 0 0 25.763672 26.416016 L 28.574219 29.916016 A 1.0001868 1.0001868 0 1 0 30.132812 28.662109 L 27.521484 25.410156 C 35.248373 23.84267 42.909967 22.95841 50.507812 22.791016 C 51.798886 22.762571 53.087414 22.757804 54.375 22.769531 z M 42.757812 34.705078 A 1.0001 1.0001 0 0 0 41.789062 35.75 L 42.927734 61.1875 A 1.0001 1.0001 0 0 0 44.494141 61.964844 L 65.210938 47.636719 A 1.0001 1.0001 0 0 0 65.095703 45.923828 L 51.8125 39.171875 A 1.0001 1.0001 0 0 0 50.998047 38.757812 L 43.240234 34.814453 A 1.0001 1.0001 0 0 0 42.757812 34.705078 z M 43.863281 37.373047 L 49.283203 40.128906 L 47.996094 41.501953 A 1.0001 1.0001 0 1 0 49.455078 42.869141 L 51.138672 41.072266 L 51.683594 41.349609 L 49.037109 44.033203 A 1.0001 1.0001 0 1 0 50.460938 45.4375 L 53.554688 42.300781 L 55.367188 43.222656 L 53.732422 45.03125 A 1.0001 1.0001 0 1 0 55.216797 46.371094 L 57.214844 44.162109 L 62.693359 46.945312 L 44.845703 59.291016 L 44.636719 54.619141 L 47.496094 53.400391 A 1.0001 1.0001 0 1 0 46.712891 51.560547 L 44.541016 52.486328 L 44.488281 51.316406 L 47.333984 50.451172 A 1.0001 1.0001 0 1 0 46.753906 48.537109 L 44.396484 49.253906 L 43.863281 37.373047 z M 31.03125 38.292969 C 30.641672 38.302531 30.274547 38.541031 30.123047 38.925781 C 29.920047 39.438781 30.1745 40.020656 30.6875 40.222656 C 31.2005 40.425656 31.781375 40.171203 31.984375 39.658203 C 32.187375 39.145203 31.934875 38.563328 31.421875 38.361328 C 31.293625 38.310578 31.161109 38.289781 31.03125 38.292969 z M 69.193359 48.779297 C 68.803781 48.788859 68.438609 49.027359 68.287109 49.412109 C 68.084109 49.925109 68.336609 50.506984 68.849609 50.708984 C 69.362609 50.911984 69.943484 50.659484 70.146484 50.146484 C 70.349484 49.633484 70.096984 49.051609 69.583984 48.849609 C 69.455734 48.798859 69.323219 48.776109 69.193359 48.779297 z M 69.564453 56.380859 C 69.175109 56.390422 68.810453 56.628922 68.658203 57.013672 C 68.455203 57.526672 68.707703 58.108547 69.220703 58.310547 C 69.734703 58.513547 70.315578 58.259094 70.517578 57.746094 C 70.720578 57.233094 70.468078 56.652219 69.955078 56.449219 C 69.826828 56.398469 69.694234 56.377672 69.564453 56.380859 z M 60.492188 59.964844 C 60.102609 59.974172 59.737437 60.212156 59.585938 60.597656 C 59.382938 61.110656 59.635438 61.692531 60.148438 61.894531 C 60.661438 62.097531 61.242313 61.843078 61.445312 61.330078 C 61.648313 60.817078 61.395812 60.236203 60.882812 60.033203 C 60.754562 59.982453 60.622047 59.961734 60.492188 59.964844 z"></path>
              </svg>
            </button>
          </div>
        ) : (
          <iframe
            className={s.video}
            src={`https://www.youtube.com/embed/${video.id.videoId}/?autoplay=1`}
            title="YouTube video player"
            // frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          ></iframe>
        )}
      </div>

      <div className={s.text}>
        <p>{smartTitle(video.snippet.title)}</p>
      </div>
    </div>
  );
}

export default VideoRender;
